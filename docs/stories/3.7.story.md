# Story 3.7: Display Character Models

## Status

Approved

## Story

**As a** developer,
**I want** to see a list of the character models I've created for a project,
**so that** I can track and manage my game's character templates.

## Acceptance Criteria

1.  The dedicated "Character Models" page at `/project/{projectId}/characters` displays the list of character models for that project.
2.  The page makes a GraphQL query to the Honeycomb API's `characterModel` endpoint, filtered by the project address.
3.  A list or table displays the created character models, showing their address and configuration kind ("Wrapped" or "Assembled").
4.  If no models exist for the project, a message indicating this is shown.

## Tasks / Subtasks

-   [ ] **Backend (BFF):** Add a new route handler for `GET /api/projects/{projectId}/character-models` to the existing file at `app/server/src/routes/characterModels.ts`.
    -   [ ] The handler should call the Honeycomb GraphQL API's `characterModel` query, using the `projectId` from the URL as the filter.
    -   [ ] The handler should parse the GraphQL response and return a simplified array of character model data to the frontend.
-   [ ] **Frontend:** In the `CharacterModelListPage` component, implement logic to fetch data from the new BFF endpoint when the component mounts.
-   [ ] **Frontend:** Create a table or list component (e.g., using Shadcn/ui's Table) to render the character model data.
    -   [ ] The table must include columns for "Model Address" and "Kind".
    -   [ ] Implement a loading state (e.g., skeleton screen) to display while data is being fetched.
    -   [ ] Implement an error state to show a user-friendly message if the API call fails.
    -   [ ] Implement the "No character models found" message when the API returns an empty array.

## Dev Notes

-   **Frontend Page:** This functionality should be built on the `CharacterModelListPage` component, which is located at the route `/project/:projectId/characters`.
-   **API Endpoint:** The frontend will fetch data from `GET /api/projects/{projectId}/character-models`.
-   **Backend Route Location:** The new route handler should be added to `app/server/src/routes/characterModels.ts`.
-   **Honeycomb Query:** The BFF will use the `characterModel` query, filtering by the `project` address.
-   **Data to Display:** The frontend needs to display the `address` and `config.kind` fields from each object in the returned array.
-   **BFF Response Structure:** The BFF should return a JSON array like this:
    ```json
    [
      {
        "address": "...",
        "kind": "Assembled"
      },
      {
        "address": "...",
        "kind": "Wrapped"
      }
    ]
    ```

## Testing

-   **Unit Test (Backend):** Verify the BFF endpoint correctly calls the `characterModel` query and transforms the data for the frontend.
-   **Unit Test (Frontend):** Test the `CharacterModelListPage` component's ability to render a list of models, the loading state, the empty state, and the error state.
-   **Integration Test:** Ensure the frontend page correctly fetches and displays the character models from the BFF for a given project.

## Change Log

| Date       | Version | Description                              | Author |
| :--------- | :------ | :--------------------------------------- | :----- |
| 2025-07-26 | 1.1     | Status updated to Approved after validation. | PO     |
| 2025-07-26 | 1.0     | Initial draft                            | SM     |